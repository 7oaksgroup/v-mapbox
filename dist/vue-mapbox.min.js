!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["vue-mapbox"]=e():t["vue-mapbox"]=e()}(this,function(){return function(t){function e(o){if(i[o])return i[o].exports;var n=i[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var i={};return e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,o){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=18)}([function(t,e){t.exports=function(t,e,i,o){var n,a=t=t||{},r=typeof t.default;"object"!==r&&"function"!==r||(n=t,a=t.default);var s="function"==typeof a?a.options:a;if(e&&(s.render=e.render,s.staticRenderFns=e.staticRenderFns),i&&(s._scopeId=i),o){var d=Object.create(s.computed||null);Object.keys(o).forEach(function(t){var e=o[t];d[t]=function(){return e}}),s.computed=d}return{esModule:n,exports:a,options:s}}},function(t,e,i){"use strict";e.a={methods:{_checkMapId:function(){if(void 0===this.mapId)if(this.$parent.container&&0===this.$parent.container.indexOf("map"))this.mapId=this.$parent.container;else{if(void 0===this.$parent.mapId)throw new Error("Component "+this.name+" needs mapId in props or component with mapId property as $parent");this.mapId=this.$parent.mapId}}}}},function(t,e,i){"use strict";e.a=["mousedown","mouseup","click","dblclick","mousemove","mouseenter","mouseleave","mouseover","mouseout","contextmenu","touchstart","touchend","touchcancel"]},function(t,e,i){"use strict";var o=i(2),n=i(1),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])}return t},r={sourceId:{type:String}},s={layerId:{type:String,required:!0},metadata:Object,refLayer:String,"source-layer":String,initMinzoom:Number,initMaxzoom:Number,initPaint:Object,initLayout:Object,before:Object},d={eventsToListen:{validator:function(t){if(!(t instanceof Array))return!1;var e=!0,i=!1,n=void 0;try{for(var a,r=t[Symbol.iterator]();!(e=(a=r.next()).done);e=!0){var s=a.value;if(!o.a.includes(s))return!1}}catch(t){i=!0,n=t}finally{try{!e&&r.return&&r.return()}finally{if(i)throw n}}return!0},default:function(){return[]}},clearSource:{type:Boolean,default:!0},replaceSource:{type:Boolean,default:!1},replace:{type:Boolean,default:!1}};e.a={mixins:[n.a],props:a({},r,s,d),data:function(){return{initial:!0,map:void 0,minzoom:this.initMinzoom,maxzoom:this.initMaxzoom,paint:this.initPaint,filter:this.initFilter,layout:this.initLayout}},computed:{sourceLoaded:function(){return this.map.isSourceLoaded(this.sourceId)},mapLayer:function(){return this.map.getLayer(this.layerId)}},watch:{eventsToListen:function(t){this.initial||(this.unBindEvents(o.a),this.bindEvents(t))},initMinzoom:function(t){this.initial||this.map.setLayerZoomRange(this.layerId,t,this.maxzoom)},initMaxzoom:function(t){this.initial||this.map.setLayerZoomRange(this.layerId,this.minzoom,t)},initPaint:function(t){if(!this.initial)for(var e in Object.keys(this.paint))this.paint[e]!==t[e]&&(this.map.setPaintProperty(this.layerId,e,t[e]),this.paint[e]=t[e])},initLayout:function(t){if(!this.initial)for(var e in Object.keys(this.layout))this.layout[e]!==t[e]&&(this.map.setLayoutProperty(this.layerId,e,t[e]),this.layout[e]=t[e])}},beforeDestroy:function(){if(this.map&&(this.map.removeLayer(this.layerId),this.clearSource))try{this.map.removeSource(this.sourceId)}catch(t){this._emitMapEvent("mgl-source-does-not-exist",{sourceId:this.sourceId,error:t})}},methods:{_bindEvents:function(t){var e=this;0!==t.length&&t.forEach(function(t){e.map.on(t,e.layerId,function(t){e.$emit("mgl-"+t,t)})})},_unBindEvents:function(t){var e=this;t.forEach(function(t){e.map.off(t,e.layerId)})},_watchSourceLoading:function(t){"source"===t.dataType&&t.sourceId===this.sourceId&&(this._emitMapEvent("mgl-layer-source-loading",{sourceId:this.sourceId}),this.map.off("dataloading",this.watchSourceLoading))},_emitMapEvent:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.$emit(t,a({map:this.map,component:this},e)),this.bus.$emit(t,a({map:this.map,component:this},e))},move:function(t){this.map.moveLayer(this.layerId,t),this._emitMapEvent("mgl-layer-moved",{layerId:this.layerId,beforeId:t})},remove:function(){this.map.removeLayer(this.layerId)}}}},function(t,e,i){"use strict";e.a={resize:"resize",webglcontextlost:"webglcontextlost",webglcontextrestored:"webglcontextrestored",remove:"remove",movestart:"movestart",load:"load",contextmenu:"contextmenu",dblclick:"dblclick",click:"click",touchcancel:"touchcancel",touchmove:"touchmove",touchend:"touchend",touchstart:"touchstart",dataloading:"dataloading",mousemove:"mousemove",mouseup:"mouseup",mousedown:"mousedown",sourcedataloading:"sourcedataloading",error:"error",data:"data",styledata:"styledata",sourcedata:"sourcedata",mouseout:"mouseout",styledataloading:"styledataloading",moveend:"moveend",move:"move",render:"render",zoom:"zoom",zoomstart:"zoomstart",zoomend:"zoomend",boxzoomstart:"boxzoomstart",boxzoomcancel:"boxzoomcancel",boxzoomend:"boxzoomend",rotate:"rotate",rotatestart:"rotatestart",rotateend:"rotateend",dragend:"dragend",drag:"drag",dragstart:"dragstart",pitch:"pitch"}},function(t,e,i){var o=i(0)(i(19),i(36),null,null);t.exports=o.exports},function(t,e,i){var o=i(0)(i(20),i(32),null,null);t.exports=o.exports},function(t,e,i){var o=i(0)(i(21),i(37),null,null);t.exports=o.exports},function(t,e,i){var o=i(0)(i(22),i(35),null,null);t.exports=o.exports},function(t,e,i){var o=i(0)(i(23),i(31),null,null);t.exports=o.exports},function(t,e,i){var o=i(0)(i(24),i(34),null,null);t.exports=o.exports},function(t,e,i){var o=i(0)(i(25),i(40),null,null);t.exports=o.exports},function(t,e,i){var o=i(0)(i(26),i(33),null,null);t.exports=o.exports},function(t,e,i){var o=i(0)(i(27),i(38),null,null);t.exports=o.exports},function(t,e,i){var o=i(0)(i(28),i(41),null,null);t.exports=o.exports},function(t,e,i){var o=i(0)(i(29),i(42),null,null);t.exports=o.exports},function(t,e,i){var o=i(0)(i(30),i(39),null,null);t.exports=o.exports},function(t,e,i){"use strict";var o=i(4);e.a={container:{type:[String,HTMLElement],default:function(){return"map-"+(""+Math.random()).split(".")[1]}},accessToken:{type:String,default:void 0},initMinZoom:{type:Number,default:0},initMaxZoom:{type:Number,default:22},initMapStyle:{type:[String,Object],required:!0},hash:{type:Boolean,default:!1},interactive:{type:Boolean,default:!0},bearingSnap:{type:Number,default:7},classes:{type:Array,default:function(){return[]}},attributionControl:{type:Boolean,default:!0},logoPosition:{type:String,default:"bottom-left"},failIfMajorPerformanceCaveat:{type:Boolean,default:!1},preserveDrawingBuffer:{type:Boolean,default:!1},refreshExpiredTiles:{type:Boolean,default:!1},initMaxBounds:{type:Array,default:function(){}},scrollZoom:{type:[Boolean,Object],default:function(){return!0}},boxZoom:{type:Boolean,default:!0},dragRotate:{type:Boolean,default:!0},dragPan:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},doubleClickZoom:{type:Boolean,default:!0},touchZoomRotate:{type:[Boolean,Object],default:function(){return!0}},trackResize:{type:Boolean,default:!0},initCenter:{type:Array,default:function(){return[0,0]}},initZoom:{type:Number,default:0},initBearing:{type:Number,default:0},initPitch:{type:Number,default:0},renderWorldCopies:{type:Boolean,default:!0},RTLTextPluginUrl:{type:String,default:void 0},initLight:{type:Object},initTileBoundaries:{type:Boolean,default:!1},initCollisionBoxes:{type:Boolean,default:!1},initRepaint:{type:Boolean,default:!1},eventsToListen:{type:Array,validator:function(t){if(!(t instanceof Array))return!1;var e=!0,i=!1,n=void 0;try{for(var a,r=t[Symbol.iterator]();!(e=(a=r.next()).done);e=!0){var s=a.value;if(!Object.keys(o.a).includes(s))return!1}}catch(t){i=!0,n=t}finally{try{!e&&r.return&&r.return()}finally{if(i)throw n}}return!0},default:function(){return[]}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"MglMap",function(){return $}),i.d(e,"MglNavigationControl",function(){return S}),i.d(e,"MglGeolocateControl",function(){return B}),i.d(e,"MglFullscreenControl",function(){return T}),i.d(e,"MglAttributionControl",function(){return k}),i.d(e,"MglScaleControl",function(){return j}),i.d(e,"MglGeojsonLayer",function(){return C}),i.d(e,"MglImageLayer",function(){return E}),i.d(e,"MglCanvasLayer",function(){return P}),i.d(e,"MglVideoLayer",function(){return w}),i.d(e,"MglMarker",function(){return R}),i.d(e,"MglPopup",function(){return Z});var o=i(5),n=i.n(o),a=i(10),r=i.n(a),s=i(8),d=i.n(s),u=i(7),h=i.n(u),m=i(6),p=i.n(m),c=i(12),l=i.n(c),f=i(9),v=i.n(f),y=i(11),g=i.n(y),I=i(14),b=i.n(I),_=i(15),x=i.n(_),M=i(13),z=i.n(M),O=i(16),L=i.n(O),$=n.a,S=r.a,B=d.a,T=h.a,k=p.a,j=l.a,C=b.a,E=x.a,P=z.a,w=L.a,R=v.a,Z=g.a;e.default={install:function(t,e){var i=new t;t.mixin({data:function(){return{mapbox:e.mapboxgl,bus:i}}})}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=(i(4),i(17)),n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])}return t};e.default={props:o.a,data:function(){return{initial:!0,map:void 0,mapOptions:{minZoom:this.initMinZoom,maxZoom:this.initMaxZoom,maxBounds:this.initMaxBounds,mapStyle:this.initMapStyle,center:this.initCenter,zoom:this.initZoom,bearing:this.initBearing,pitch:this.initPitch,collisionBoxes:this.initCollisionBoxes,titleBoundaries:this.initTileBoundaries,repaint:this.initRepaint,light:this.initLight}}},computed:{loaded:function(){return this.map.loaded()},version:function(){return this.map.version},bounds:function(){return this.map.getBounds()},isStyleLoaded:function(){return this.map.isStyleLoaded()},areTilesLoaded:function(){return this.map.areTilesLoaded()},isMoving:function(){return this.map.isMoving()},canvas:function(){return this.map.getCanvas()},canvasContainer:function(){return this.map.getCanvasContainer()}},watch:{initMaxBounds:function(t){this.initial||(this.map.setMaxBounds(t),this.mapOptions.maxBounds=t)},initMinZoom:function(t){this.initial||(this.map.setMinZoom(t),this.mapOptions.minZoom=t)},initMaxZoom:function(t){this.initial||(this.map.setMaxZoom(t),this.mapOptions.maxZoom=t)},initMapStyle:function(t){this.initial||(this.map.setStyle(t),this.mapOptions.mapStyle=t)},initCollisionBoxes:function(t){this.initial||(this.map.showCollisionBoxes=t,this.mapOptions.showCollisionBoxes=t)},initTileBoundaries:function(t){this.initial||(this.map.showTileBoundaries=t,this.mapOptions.showTileBoundaries=t)},initRepaint:function(t){this.initial||(this.map.repaint=t,this.mapOptions.repaint=t)},initZoom:function(t){this.initial||(this.map.setZoom(t),this.mapOptions.zoom=t)},initCenter:function(t){this.initial||(this.map.setCenter(t),this.mapOptions.center=t)},initBearing:function(t){this.initial||(this.map.setBearing(t),this.mapOptions.bearing=t)},initPitch:function(t){this.initial||(this.map.setPitch(t),this.mapOptions.pitch=t)},initLight:function(t){this.initial||(this.map.setLight(t),this.mapOptions.light=t)}},mounted:function(){var t=this;console.log("Map: ",this),this._loadMap().then(function(e){console.log(t.container),t.map=e,void 0!==t.RTLTextPluginUrl&&e.setRTLTextPlugin(t.RTLTextPluginUrl,t._RTLTextPluginError),t.$emit("mgl-load",{map:e,component:t,mapId:t.container}),t.bus.$emit("mgl-load",{map:e,component:t,mapId:t.container}),t._bindEvents(t.eventsToListen),t.initial=!1})},beforeDestroy:function(){this.map&&this.map.remove()},methods:{_loadMap:function(){var t=this;return new Promise(function(e){t.accessToken&&(t.mapbox.accessToken=t.accessToken);var i=new t.mapbox.Map(n({},t._props,t.mapOptions,{style:t.initMapStyle}));i.on("load",function(){return e(i)})})},_RTLTextPluginError:function(t){this.$emit("mgl-rtl-plugin-error",{map:this.map,error:t})},_bindEvents:function(t){var e=this;if(0!==t.length){var i=!0,o=!1,n=void 0;try{for(var a,r=Object.keys(t)[Symbol.iterator]();!(i=(a=r.next()).done);i=!0)!function(){var t=a.value;e.map.on(t,function(i){e.$emit("mgl-"+i,t),e.bus.$emit("mgl-"+i,t)})}()}catch(t){o=!0,n=t}finally{try{!i&&r.return&&r.return()}finally{if(o)throw n}}}},_unBindEvents:function(t){var e=this;t.forEach(function(t){e.map.off(t)})},supported:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.map.supported({failIfMajorPerformanceCaveat:t})},resize:function(){this.map.resize()},project:function(t){return this.map.project(t)},unproject:function(t){return this.map.unproject(t)},queryRenderedFeatures:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return this.map.queryRenderedFeatures(t,e)},querySourceFeatures:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return this.map.querySourceFeatures(t,e)},addImage:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.map.addImage(t,e,i)},removeImage:function(t){this.map.addImage(t)},loadImage:function(t,e){this.map.loadImage(t,e)},panBy:function(t){function e(t){t.eventId===o.eventId&&(this.mapOptions.center=this.map.getCenter(),this.map.off("moveend",e))}var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,o={eventId:"panBy-"+(""+Math.random()).split(".")[1]};this.map.on("moveend",e),this.map.panBy(t,i,o)},panTo:function(t){function e(t){t.eventId===o.eventId&&(this.mapOptions.center=this.map.getCenter(),this.map.off("moveend",e))}var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,o={eventId:"panTo-"+(""+Math.random()).split(".")[1]};this.map.on("moveend",e),this.map.panTo(t,i,o)},zoomTo:function(t){function e(t){t.eventId===o.eventId&&(this.mapOptions.zoom=this.map.getZoom(),this.map.off("zoomend",e))}var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,o={eventId:"zoomTo-"+(""+Math.random()).split(".")[1]};this.map.on("zoomend",e),this.map.zoomTo(t,i,o)},zoomIn:function(){function t(e){e.eventId===i.eventId&&(this.mapOptions.zoom=this.map.getZoom(),this.map.off("zoomend",t))}var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,i={eventId:"zoomIn-"+(""+Math.random()).split(".")[1]};this.map.on("zoomend",t),this.map.zoomIn(e,i)},zoomOut:function(){function t(e){e.eventId===i.eventId&&(this.mapOptions.zoom=this.map.getZoom(),this.map.off("zoomend",t))}var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,i={eventId:"zoomOut-"+(""+Math.random()).split(".")[1]};this.map.on("zoomend",t),this.map.zoomOut(e,i)},rotateTo:function(t){function e(t){t.eventId===o.eventId&&(this.mapOptions.bearing=this.map.getBearing(),this.map.off("rotateend",e))}var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,o={eventId:"rotateTo-"+(""+Math.random()).split(".")[1]};this.map.on("rotateend",e),this.map.rotateTo(t,i,o)},resetNorth:function(){function t(e){e.eventId===i.eventId&&(this.mapOptions.bearing=this.map.getBearing(),this.map.off("rotateend",t))}var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,i={eventId:"resetNorth-"+(""+Math.random()).split(".")[1]};this.map.on("rotateend",t),this.map.resetNorth(e,i)},snapToNorth:function(){function t(e){e.eventId===i.eventId&&(this.mapOptions.bearing=this.map.getBearing(),this.map.off("rotateend",t))}var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,i={eventId:"snapToNorth-"+(""+Math.random()).split(".")[1]};this.map.on("rotateend",t),this.map.snapToNorth(e,i)},fitBounds:function(t){function e(t){t.eventId===n.eventId&&(this.mapOptions.zoom=this.map.getZoom(),this.map.off("zoomend",e))}function i(t){t.eventId===n.eventId&&(this.mapOptions.center=this.map.getCenter(),this.map.off("moveend",i))}var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n={eventId:"fitBounds-"+(""+Math.random()).split(".")[1]};this.map.on("zoomend",e),this.map.on("moveend",i),this.map.fitBounds(t,o,n)},jumpTo:function(t){var e={eventId:"jumpTo-"+(""+Math.random()).split(".")[1]};if(t.bearing){var i=function t(i){i.eventId===e.eventId&&(this.mapOptions.bearing=this.map.getBearing(),this.map.off("rotateend",t))};this.map.on("rotateend",i)}if(t.zoom){var o=function t(i){i.eventId===e.eventId&&(this.mapOptions.zoom=this.map.getZoom(),this.map.off("zoomend",t))};this.map.on("zoomend",o)}if(t.center){var n=function t(i){i.eventId===e.eventId&&(this.mapOptions.center=this.map.getCenter(),this.map.off("moveend",t))};this.map.on("moveend",n)}if(t.pitch){var a=function t(i){i.eventId===e.eventId&&(this.mapOptions.pitch=this.map.getPitch(),this.map.off("pitchend",t))};this.map.on("pitchend",a)}this.map.jumpTo(t,e)},easeTo:function(t){var e={eventId:"easeTo-"+(""+Math.random()).split(".")[1]};if(t.bearing){var i=function t(i){i.eventId===e.eventId&&(this.mapOptions.bearing=this.map.getBearing(),this.map.off("rotateend",t))};this.map.on("rotateend",i)}if(t.zoom){var o=function t(i){i.eventId===e.eventId&&(this.mapOptions.zoom=this.map.getZoom(),this.map.off("zoomend",t))};this.map.on("zoomend",o)}if(t.center){var n=function t(i){i.eventId===e.eventId&&(this.mapOptions.center=this.map.getCenter(),this.map.off("moveend",t))};this.map.on("moveend",n)}if(t.pitch){var a=function t(i){i.eventId===e.eventId&&(this.mapOptions.pitch=this.map.getPitch(),this.map.off("pitchend",t))};this.map.on("pitchend",a)}this.map.easeTo(t,e)},flyTo:function(t){var e={eventId:"flyTo-"+(""+Math.random()).split(".")[1]};if(t.bearing){var i=function t(i){i.eventId===e.eventId&&(this.mapOptions.bearing=this.map.getBearing(),this.map.off("rotateend",t))};this.map.on("rotateend",i)}if(t.zoom){var o=function t(i){i.eventId===e.eventId&&(this.mapOptions.zoom=this.map.getZoom(),this.map.off("zoomend",t))};this.map.on("zoomend",o)}if(t.center){var n=function t(i){i.eventId===e.eventId&&(this.mapOptions.center=this.map.getCenter(),this.map.off("moveend",t))};this.map.on("moveend",n)}if(t.pitch){var a=function t(i){i.eventId===e.eventId&&(this.mapOptions.pitch=this.map.getPitch(),this.map.off("pitchend",t))};this.map.on("pitchend",a)}this.map.flyTo(t,e)},stop:function(){this.map.stop(),this.mapOptions.pitch=this.map.getPitch(),this.mapOptions.zoom=this.map.getZoom(),this.mapOptions.bearing=this.map.getBearing()}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(1);e.default={mixins:[o.a],props:{compact:{type:Boolean,default:!0}},data:function(){return{control:void 0,map:void 0}},created:function(){this.control=new this.mapbox.AttributionControl({compact:this.compact})},mounted:function(){this._checkMapId(),this.bus.$on("mgl-load",this._deferredMount)},beforeDestroy:function(){this.map.removeControl(this.control)},methods:{_deferredMount:function(t){t.mapId===this.mapId&&(this.map=t.map,this.map.addControl(this.control),this.$emit("mgl-attribution-control-added",this.control),this.bus.$emit("mgl-attribution-control-added",this.control),this.bus.$off("mgl-load",this._deferredMount))}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(1);e.default={mixins:[o.a],props:{position:{type:String,default:"top-right"}},data:function(){return{control:void 0,map:void 0}},created:function(){this.control=new this.mapbox.FullscreenControl},mounted:function(){this._checkMapId(),this.bus.$on("mgl-load",this._deferredMount)},beforeDestroy:function(){this.map.removeControl(this.control)},methods:{_deferredMount:function(t){t.mapId===this.mapId&&(this.map=t.map,this.map.addControl(this.control,this.position),this.$emit("mgl-fullscreen-control-added",this.control),this.bus.$emit("mgl-fullscreen-control-added",this.control),this.bus.$off("mgl-load",this._deferredMount))}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(1);e.default={mixins:[o.a],props:{position:{type:String,default:"top-right"},positionOptions:{type:Object,default:function(){return{enableHighAccuracy:!1,timeout:6e3}}},watchPosition:{type:Boolean,default:!1}},data:function(){return{control:void 0,map:void 0}},created:function(){var t=this;this.control=new this.mapbox.GeolocateControl(this._props),this.control.on("error",function(e){t.$emit("geolocate-error",e),t.bus.$emit("geolocate-error",e)}),this.control.on("geolocate",function(e){t.$emit("geolocate",e),t.bus.$emit("geolocate-error",e)})},mounted:function(){this._checkMapId(),this.bus.$on("mgl-load",this._deferredMount)},beforeDestroy:function(){this.map.removeControl(this.control)},methods:{_deferredMount:function(t){t.mapId===this.mapId&&(this.map=t.map,this.map.addControl(this.control),this.$emit("mgl-geolocate-control-added",this.control),this.bus.$emit("mgl-geolocate-control-added",this.control),this.bus.$off("mgl-load",this._deferredMount))}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(1),n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])}return t};e.default={mixins:[o.a],props:{offset:{type:[Object,Array],default:function(){return[0,0]}},coordinates:{type:Array,required:!0},mapContainerId:{type:String}},data:function(){return{initial:!0,map:void 0,marker:void 0}},mounted:function(){this._checkMapId(),this.bus.$on("mgl-load",this._deferredMount)},beforeDestroy:function(){this.map&&this.marker.remove()},watch:{coordinates:function(t){this.initial||this.marker.setLngLat(t)}},methods:{_deferredMount:function(t){t.mapId===this.mapId&&(this.$slots.marker?this.marker=new this.mapbox.Marker(this.$slots.marker[0].elm,n({},this._props)):this.marker=new this.mapbox.Marker(n({},this._props)),this.map=t.map,this._addMarker(),this.initial=!1,this.bus.$off("mgl-load",this._deferredMount))},_addMarker:function(){this.marker.setLngLat(this.coordinates).addTo(this.map),this.$emit("mgl-marker-added",this.marker),this.bus.$emit("mgl-marker-added",this.marker)},remove:function(){this.marker.remove(),this.$emit("mgl-marker-removed",this.marker),this.bus.$emit("mgl-marker-removed",this.marker)},togglePopup:function(){this.marker.togglePopup()}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(1);e.default={mixins:[o.a],props:{position:{type:String,default:"top-right"}},data:function(){return{control:void 0,map:void 0}},created:function(){this.control=new this.mapbox.NavigationControl},mounted:function(){this._checkMapId(),this.bus.$on("mgl-load",this._deferredMount)},beforeDestroy:function(){this.map.removeControl(this.control)},methods:{_deferredMount:function(t){t.mapId===this.mapId&&(this.map=t.map,this.map.addControl(this.control,this.position),this.$emit("mgl-nav-control-added",this.control),this.bus.$emit("mgl-nav-control-added",this.control),this.bus.$off("mgl-load",this._deferredMount))}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(1),n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])}return t};e.default={mixins:[o.a],props:{closeButton:{type:Boolean,default:!0},closeOnClick:{type:Boolean,default:!0},anchor:{validator:function(t){var e=["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right"];return"string"==typeof t&&-1!==e.indexOf(t)||void 0===t},default:void 0},offset:{type:[Object,Array],default:function(){return[0,0]}},coordinates:{type:Array},onlyText:{type:Boolean,default:!1}},data:function(){return{initial:!0,map:void 0,popup:void 0}},computed:{isOpen:function(){return void 0!==this.popup&&this.popup.isOpen()}},mounted:function(){this.bus.$on("mgl-load",this._deferredMount)},beforeDestroy:function(){this.map&&(this.$emit("mgl-popup-removed",this.popup),this.bus.$emit("mgl-popup-removed",this.popup),this.popup.remove())},watch:{coordinates:function(t){this.initial||this.popup.setLngLat(t)}},methods:{_deferredMount:function(t){this._checkMapId(),t.mapId===this.mapId&&(this.map=t.map,this._addPopup(),this.initial=!1,this.bus.$off("mgl-load",this._deferredMount))},_addPopup:function(){var t=this;if(this.popup=new this.mapbox.Popup(n({},this._props)),void 0!==this.coordinates&&this.popup.setLngLat(this.coordinates),void 0!==this.$slots.default)if(this.onlyText)if(3===this.$slots.default[0].elm.nodeType){var e=document.createElement("span");e.appendChild(this.$slots.default[0].elm),this.popup.setText(e.innerText)}else this.popup.setText(this.$slots.default[0].elm.innerText);else this.popup.setDOMContent(this.$slots.default[0].elm);this.popup.addTo(this.map),this.$emit("mgl-popup-added",this.popup),this.bus.$emit("mgl-popup-added",this.popup),this.popup.on("close",this._onClose),this.$parent.$on("mgl-marker-added",function(e){e.setPopup(t.popup)})},_onClose:function(){this.$emit("mgl-popup-close",this.popup),this.bus.$emit("mgl-popup-close",this.popup)}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(1);e.default={mixins:[o.a],props:{maxWidth:{type:Number,default:150},unit:{type:String,default:"metric"}},data:function(){return{control:void 0,map:void 0}},created:function(){this.control=new this.mapbox.ScaleControl(this._props)},mounted:function(){this._checkMapId(),this.bus.$on("mgl-load",this._deferredMount)},beforeDestroy:function(){this.map.removeControl(this.control)},methods:{_deferredMount:function(t){if(t.mapId===this.mapId){this.map=t.map;try{this.map.addControl(this.control)}catch(t){console.log(t)}this.$emit("mgl-scale-control-added",this.control),this.bus.$emit("mgl-scale-control-added",this.control),this.bus.$off("mgl-load",this._deferredMount)}}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(2),n=i(3);e.default={mixins:[n.a],props:{coordinates:{type:Array,required:!0},animate:{type:Boolean,default:!0}},mounted:function(){if("canvas"!==this.$slots.default[0].tag)throw new Error('Error in map layer component with source id "'+this.sourceId+'" and layer id "'+this.layerId+'"\n        You need to add canvas element as child of canvas layer.');this._checkMapId(),this.bus.$on("mgl-load",this._deferredMount)},computed:{canvas:function(){return this.map.getSource(this.sourceId).getCanvas()}},watch:{minzoom:function(t){this.initial||this.map.setLayerZoomRange(this.layerId,t,this.maxzoom)},maxzoom:function(t){this.initial||this.map.setLayerZoomRange(this.layerId,this.minzoom,t)},coordinates:function(t){this.initial||this.map.setCoordinates(t)}},methods:{_deferredMount:function(t){if(t.mapId===this.mapId){var e={type:"canvas",coordinates:this.coordinates,animate:this.animate,canvas:this.$slots.default[0].data.attrs.id};if(this.map=t.map,this.map.on("dataloading",this._watchSourceLoading),e)try{this.map.addSource(this.sourceId,e)}catch(t){this.replaceSource?(this.map.removeSource(this.sourceId),this.map.addSource(this.sourceId,e)):this._emitMapEvent("mgl-layer-source-error",{sourceId:this.sourceId,error:t})}this._addLayer(),this.listenUserEvents&&this._bindEvents(o.a),this.initial=!1,this.bus.$off("mgl-load",this._deferredMount)}},_addLayer:function(){var t=this.map.getLayer(this.layerId);if(t){if(!this.replace)return this._emitMapEvent("mgl-layer-exists",{layerId:this.layerId}),t;this.map.removeLayer(this.layerId)}var e={id:this.layerId,source:this.sourceId,type:"raster"};this.refLayer?e.ref=this.refLayer:(this["source-layer"]&&(e["source-layer"]=this["source-layer"]),this.minzoom&&(e.minzoom=this.minzoom),this.maxzoom&&(e.maxzoom=this.maxzoom)),e.paint=this.paint?this.paint:{"raster-opacity":.85},e.metadata=this.metadata,this.map.addLayer(e,this.before),this._emitMapEvent("mgl-layer-added",{layerId:this.layerId})}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(2),n=i(3);e.default={mixins:[n.a],props:{initSource:{type:[Object,String]},type:{validator:function(t){var e=["fill","line","symbol","circle","fill-extrusion","raster","background"];return"string"==typeof t&&-1!==e.indexOf(t)||void 0===t},default:"fill"},initFilter:{type:Array,default:void 0}},data:function(){return{source:this.initSource}},watch:{initSource:function(t){this.initial||(this.map.getSource(this.sourceId).setData(t),this.source=this.map.getSource(this.sourceId))},initFilter:function(t){this.initial||(this.map.setFilter(this.layerId,t),this.mapOptions.filter=t)}},mounted:function(){this._checkMapId(),this.bus.$on("mgl-load",this._deferredMount)},methods:{_deferredMount:function(t){if(t.mapId===this.mapId){if(this.map=t.map,this.map.on("dataloading",this._watchSourceLoading),this.source)try{this.map.addSource(this.sourceId,{type:"geojson",data:this.source})}catch(t){this.replaceSource?(this.map.removeSource(this.sourceId),this.map.addSource(this.sourceId,{type:"geojson",data:this.source})):this._emitMapEvent("mgl-layer-source-error",{sourceId:this.sourceId,error:t})}this._addLayer(),this.listenUserEvents&&this._bindEvents(o.a),this.map.off("dataloading",this._watchSourceLoading),this.initial=!1,this.bus.$off("mgl-load",this._deferredMount)}},_addLayer:function(){var t=this.map.getLayer(this.layerId);if(t){if(!this.replace)return this._emitMapEvent("mgl-layer-exists",{layerId:this.layerId}),t;this.map.removeLayer(this.layerId)}var e={id:this.layerId,source:this.sourceId};this.refLayer?e.ref=this.refLayer:(e.type=this.type?this.type:"fill",e.source=this.sourceId,this["source-layer"]&&(e["source-layer"]=this["source-layer"]),this.minzoom&&(e.minzoom=this.minzoom),this.maxzoom&&(e.maxzoom=this.maxzoom),this.layout&&(e.layout=this.layout),this.filter&&(e.filter=this.filter)),e.paint=this.paint?this.paint:{"fill-color":"rgba("+3*this.layerId.length*12+",153,80,0.55)"},e.metadata=this.metadata,this.map.addLayer(e,this.before),this._emitMapEvent("mgl-layer-added",{layerId:this.layerId})}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(3),n=i(2);e.default={mixins:[o.a],props:{coordinates:{type:Array,required:!0},url:{type:String,required:!0}},mounted:function(){this._checkMapId(),this.bus.$on("mgl-load",this._deferredMount)},watch:{minzoom:function(t){this.initial||this.map.setLayerZoomRange(this.layerId,t,this.maxzoom)},maxzoom:function(t){this.initial||this.map.setLayerZoomRange(this.layerId,this.minzoom,t)},paint:function(t){var e=this;this.initial||t.keys().forEach(function(i){e.map.setPaintProperty(e.layerId,i,t)})},coordinates:function(t){this.initial||this.map.setCoordinates(t)}},methods:{_deferredMount:function(t){if(t.mapId===this.mapId){var e={type:"image",url:this.url,coordinates:this.coordinates};if(this.map=t.map,this.map.on("dataloading",this._watchSourceLoading),e)try{this.map.addSource(this.sourceId,e)}catch(t){this.replaceSource?(this.map.removeSource(this.sourceId),this.map.addSource(this.sourceId,e)):this._emitMapEvent("mgl-layer-source-error",{sourceId:this.sourceId,error:t})}this._addLayer(),this.listenUserEvents&&this._bindEvents(n.a),this.initial=!1,this.bus.$off("mgl-load",this._deferredMount)}},_addLayer:function(){var t=this.map.getLayer(this.layerId);if(t){if(!this.replace)return this._emitMapEvent("mgl-layer-exists",{layerId:this.layerId}),t;this.map.removeLayer(this.layerId)}var e={id:this.layerId,source:this.sourceId,type:"raster"};this.refLayer?e.ref=this.refLayer:(this["source-layer"]&&(e["source-layer"]=this["source-layer"]),this.minzoom&&(e.minzoom=this.minzoom),this.maxzoom&&(e.maxzoom=this.maxzoom),this.layout&&(e.layout=this.layout),this.filter&&(e.filter=this.filter)),e.paint=this.paint?this.paint:{"raster-opacity":1},e.metadata=this.metadata,this.map.addLayer(e,this.before),this._emitMapEvent("mgl-layer-added",{layerId:this.layerId})}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(2),n=i(3);e.default={mixins:[n.a],props:{coordinates:{type:Array,required:!0},urls:{type:Array,required:!0}},mounted:function(){this._checkMapId(),this.bus.$on("mgl-load",this._deferredMount)},computed:{video:function(){return this.map.getSource(this.sourceId).getVideo()}},watch:{minzoom:function(t){this.initial||this.map.setLayerZoomRange(this.layerId,t,this.maxzoom)},maxzoom:function(t){this.initial||this.map.setLayerZoomRange(this.layerId,this.minzoom,t)},coordinates:function(t){this.initial||this.map.setCoordinates(t)}},methods:{_deferredMount:function(t){if(t.mapId===this.mapId){var e={type:"video",urls:this.urls,coordinates:this.coordinates};if(this.map=t.map,this.map.on("dataloading",this._watchSourceLoading),e)try{this.map.addSource(this.sourceId,e)}catch(t){this.replaceSource?(this.map.removeSource(this.sourceId),this.map.addSource(this.sourceId,e)):this._emitMapEvent("mgl-layer-source-error",{sourceId:this.sourceId,error:t})}this._addLayer(),this.listenUserEvents&&this._bindEvents(o.a),this.initial=!1,this.bus.$off("mgl-load",this._deferredMount)}},_addLayer:function(){var t=this.map.getLayer(this.layerId);if(t){if(!this.replace)return this._emitMapEvent("mgl-layer-exists",{layerId:this.layerId}),t;this.map.removeLayer(this.layerId)}var e={id:this.layerId,source:this.sourceId,type:"background"};this.refLayer?e.ref=this.refLayer:(this["source-layer"]&&(e["source-layer"]=this["source-layer"]),this.minzoom&&(e.minzoom=this.minzoom),this.maxzoom&&(e.maxzoom=this.maxzoom)),e.metadata=this.metadata,this.map.addLayer(e,this.before),this._emitMapEvent("mgl-layer-added",{layerId:this.layerId})}}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticStyle:{display:"none"}},[t._t("marker"),t._v(" "),t._t("default")],2)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{attrs:{id:t.container}},[t._t("default")],2)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticStyle:{display:"none"}},[t._t("default")],2)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticStyle:{display:"none"}},[t._t("default")],2)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},staticRenderFns:[]}}])});